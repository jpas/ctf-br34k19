version: '3'

services:
  ctfd:
    container_name: ctfd
    image: ctfd/ctfd
    restart: unless-stopped
    labels:
      - 'traefik.enable=true'
      - 'traefik.frontend.rule=Host:$BASE_DOMAIN'
      - 'traefik.docker.network=$TRAEFIK_NETWORK'
    networks:
      - traefik

  crummy:
    container_name: crummy
    build: ./web/crummy
    restart: unless-stopped
    labels:
      - 'traefik.enable=true'
      - 'traefik.frontend.rule=Host:crummy.$BASE_DOMAIN'
      - 'traefik.docker.network=$TRAEFIK_NETWORK'
    networks:
      - traefik

networks:
  traefik:
    external:
      name: $TRAEFIK_NETWORK
